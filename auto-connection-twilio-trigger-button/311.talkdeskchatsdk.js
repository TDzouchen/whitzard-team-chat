(self.webpackChunkTalkdeskChatSDK=self.webpackChunkTalkdeskChatSDK||[]).push([[311],{51474:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});const r=(0,n(26253).mF)().o},92055:function(e,t,n){"use strict";n.d(t,{C:function(){return c},ee:function(){return f}});var r=n(26253),a=n(22391),o=n(30717),i="nr@context";let u=(0,r.fP)();var c;u.ee?c=u.ee:(c=ee(void 0,"globalEE"),u.ee=c);var f=ee(void 0,"baseEE");function EventContext(){}function ee(e,t){var n={},r={},u={},c={on:addEventListener,addEventListener:addEventListener,removeEventListener:function removeEventListener(e,t){var r=n[e];if(!r)return;for(var a=0;a<r.length;a++)r[a]===t&&r.splice(a,1)},emit:function emit(t,n,a,o,i){!1!==i&&(i=!0);if(f.aborted&&!o)return;e&&i&&e.emit(t,n,a);for(var u=context(a),p=listeners(t),s=p.length,d=0;d<s;d++)p[d].apply(u,n);var w=getBuffer()[r[t]];w&&w.push([c,t,n,u]);return u},get:function getOrCreate(e){return u[e]=u[e]||ee(c,e)},listeners:listeners,context:context,buffer:function bufferEventsByGroup(e,t){var n=getBuffer();if(c.aborted)return;(0,o.D)(e,(function(e,a){t=t||"feature",r[a]=t,t in n||(n[t]=[])}))},abort:abortIfNotLoaded,aborted:!1,isBuffering:function isBuffering(e){return!!getBuffer()[r[e]]},debugId:t};return e||(c.backlog={}),c;function context(e){return e&&e instanceof EventContext?e:e?(0,a.X)(e,i,getNewContext):getNewContext()}function addEventListener(e,t){n[e]=listeners(e).concat(t)}function listeners(e){return n[e]||[]}function getBuffer(){return e?e.backlog:c.backlog}}function getNewContext(){return new EventContext}function abortIfNotLoaded(){(f.backlog.api||f.backlog.feature)&&(f.aborted=!0,f.backlog={})}},1883:function(e,t,n){"use strict";n.d(t,{EM:function(){return a},l_:function(){return o},pr:function(){return handle}});var r=n(92055),a=r.ee.get("handle"),o=r.C.get("handle");function handle(e,t,n,r,o){o?(o.buffer([e],r),o.emit(e,t,n)):(a.buffer([e],r),a.emit(e,t,n))}},74137:function(e,t,n){"use strict";n.d(t,{m:function(){return eventListenerOpts}});var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassive",null,a),window.removeEventListener("testPassive",null,a)}catch(e){}function eventListenerOpts(e){return r?{passive:!0,capture:!!e}:!!e}},83707:function(e,t,n){"use strict";n.d(t,{W:function(){return FeatureBase}});var r=n(92055);class FeatureBase{constructor(e,t){this.agentIdentifier=e,this.aggregator=t,this.ee=r.ee.get(e)}}},22391:function(e,t,n){"use strict";n.d(t,{X:function(){return getOrSet}});var r=Object.prototype.hasOwnProperty;function getOrSet(e,t,n){if(r.call(e,t))return e[t];var a=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:a,writable:!0,enumerable:!1}),a}catch(e){}return e[t]=a,a}},27531:function(e,t,n){"use strict";n.d(t,{em:function(){return wrap_wrapEvents},u5:function(){return wrap_wrapFetch},QU:function(){return wrap_wrapHistory},gy:function(){return wrap_wrapRaf},BV:function(){return wrap_wrapTimer},Kf:function(){return wrap_wrapXhr}});var r=n(92055),a=n(48683),o=n.n(a),i=n(51474),u=window,c="fetch-",f=(u.Request,u.Response,"nr@context");function wrapFetch(e){var t=i.Y.FETCH,n=e||r.ee,a=wrapPromiseMethod(n,t,c);return n.on(c+"end",(function(e,t){var r=this;if(t){var a=t.headers.get("content-length");null!==a&&(r.rxSize=a),n.emit(c+"done",[null,t],r)}else n.emit(c+"done",[e],r)})),a}function wrapPromiseMethod(e,t,n){return function nrWrapper(){var r,a=o()(arguments),i={};e.emit(n+"before-start",[a],i),i[f]&&i[f].dt&&(r=i[f].dt);var u=t.apply(this,a);return e.emit(n+"start",[a,r],u),u.then((function(t){return e.emit(n+"end",[null,t],u),t}),(function(t){throw e.emit(n+"end",[t],u),t}))}}var p="nr@original",s=Object.prototype.hasOwnProperty,d=!1;function createWrapperWithEmitter(e,t){return e||(e=r.ee),wrapFn.inPlace=function inPlace(e,t,n,r,a){n||(n="");var o,i,u,c="-"===n.charAt(0);for(u=0;u<t.length;u++)notWrappable(o=e[i=t[u]])||(e[i]=wrapFn(o,c?i+n:n,r,i,a))},wrapFn.flag=p,wrapFn;function wrapFn(t,n,r,a,i){return notWrappable(t)?t:(n||(n=""),nrWrapper[p]=t,copy(t,nrWrapper,e),nrWrapper);function nrWrapper(){var u,c,f,p;try{c=this,u=o()(arguments),f="function"==typeof r?r(u,c):r||{}}catch(t){report([t,"",[u,c,a],f],e)}safeEmit(n+"start",[u,c,a],f,i);try{return p=t.apply(c,u)}catch(e){throw safeEmit(n+"err",[u,c,e],f,i),e}finally{safeEmit(n+"end",[u,c,p],f,i)}}}function safeEmit(n,r,a,o){if(!d||t){var i=d;d=!0;try{e.emit(n,r,a,t,o)}catch(t){report([t,n,r,a],e)}d=i}}}function report(e,t){t||(t=r.ee);try{t.emit("internal-error",e)}catch(e){}}function copy(e,t,n){if(Object.defineProperty&&Object.keys)try{return Object.keys(e).forEach((function(n){Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){return e[n]=t,t}})})),t}catch(e){report([e],n)}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return t}function notWrappable(e){return!(e&&e instanceof Function&&e.apply&&!e[p])}function wrapTimer(e){var t=function wrap_timer_scopedEE(e){return(e||r.ee).get("timer")}(e),n=createWrapperWithEmitter(t),a="setTimeout",o="setInterval",i="clearTimeout",u="-start";return n.inPlace(window,[a,"setImmediate"],a+"-"),n.inPlace(window,[o],o+"-"),n.inPlace(window,[i,"clearImmediate"],i+"-"),t.on(o+u,(function interval(e,t,r){e[0]=n(e[0],"fn-",null,r)})),t.on(a+u,(function timer(e,t,r){this.method=r,this.timerDuration=isNaN(e[1])?0:+e[1],e[0]=n(e[0],"fn-",this,r)})),t}function wrapRaf(e){var t=function wrap_raf_scopedEE(e){return(e||r.ee).get("raf")}(e),n=createWrapperWithEmitter(t),a="equestAnimationFrame";return n.inPlace(window,["r"+a,"mozR"+a,"webkitR"+a,"msR"+a],"raf-"),t.on("raf-start",(function(e){e[0]=n(e[0],"fn-")})),t}function wrapHistory(e){var t=function wrap_history_scopedEE(e){return(e||r.ee).get("history")}(e),n=createWrapperWithEmitter(t),a=window.history&&window.history.constructor&&window.history.constructor.prototype,o=window.history;return a&&a.pushState&&a.replaceState&&(o=a),n.inPlace(o,["pushState","replaceState"],"-"),t}var w=n(74137);function wrapXhr(e){var t=e||r.ee,n=function wrap_xhr_scopedEE(e){return(e||r.ee).get("events")}(t),a=createWrapperWithEmitter(n),o=i.Y.XHR,u=i.Y.MO,c=i.Y.PR,f=i.Y.SI,p="readystatechange",s=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],d=[],l=window.XMLHttpRequest=function(e){var t=new o(e);try{n.emit("new-xhr",[t],t),t.addEventListener(p,wrapXHR,(0,w.m)(!1))}catch(e){try{n.emit("internal-error",[e])}catch(e){}}return t};function wrapOnreadystatechange(e,t){a.inPlace(t,["onreadystatechange"],"fn-",getObject)}function wrapXHR(){var e=this,t=n.context(e);e.readyState>3&&!t.resolved&&(t.resolved=!0,n.emit("xhr-resolved",[],e)),a.inPlace(e,s,"fn-",getObject)}if(function copy(e,t){for(var n in e)t[n]=e[n];return t}(o,l),l.prototype=o.prototype,a.inPlace(l.prototype,["open","send"],"-xhr-",getObject),n.on("send-xhr-start",(function(e,t){wrapOnreadystatechange(e,t),function enqueuePendingXhr(e){d.push(e),u&&(h?h.then(drainPendingXhrs):f?f(drainPendingXhrs):(v=-v,y.data=v))}(t)})),n.on("open-xhr-start",wrapOnreadystatechange),u){var h=c&&c.resolve();if(!f&&!c){var v=1,y=document.createTextNode(v);new u(drainPendingXhrs).observe(y,{characterData:!0})}}else t.on("fn-end",(function(e){e[0]&&e[0].type===p||drainPendingXhrs()}));function drainPendingXhrs(){for(var e=0;e<d.length;e++)wrapOnreadystatechange(0,d[e]);d.length&&(d=[])}function getObject(e,t){return t}return n}var l=n(22391);function wrapEvents(e){var t=function wrap_events_scopedEE(e){return(e||r.ee).get("events")}(e),n=createWrapperWithEmitter(t,!0),a=XMLHttpRequest,o="addEventListener",i="removeEventListener";function findAndWrapNode(e){for(var t=e;t&&!t.hasOwnProperty(o);)t=Object.getPrototypeOf(t);t&&wrapNode(t)}function wrapNode(e){n.inPlace(e,[o,i],"-",uniqueListener)}function uniqueListener(e,t){return e[1]}return"getPrototypeOf"in Object?(findAndWrapNode(document),findAndWrapNode(window),findAndWrapNode(a.prototype)):a.prototype.hasOwnProperty(o)&&(wrapNode(window),wrapNode(a.prototype)),t.on(o+"-start",(function(e,t){var r=e[1];if(null!==r&&("function"==typeof r||"object"==typeof r)){var a=(0,l.X)(r,"nr@wrapped",(function(){var e={object:function wrapHandleEvent(){if("function"!=typeof r.handleEvent)return;return r.handleEvent.apply(r,arguments)},function:r}[typeof r];return e?n(e,"fn-",null,e.name||"anonymous"):r}));this.wrapped=e[1]=a}})),t.on(i+"-start",(function(e){e[1]=this.wrapped||e[1]})),t}function wrap_wrapEvents(e){return wrapEvents(e)}function wrap_wrapFetch(e){return wrapFetch(e)}function wrap_wrapHistory(e){return wrapHistory(e)}function wrap_wrapRaf(e){return wrapRaf(e)}function wrap_wrapTimer(e){return wrapTimer(e)}function wrap_wrapXhr(e){return wrapXhr(e)}},48683:function(e){e.exports=function slice(e,t,n){t||(t=0),void 0===n&&(n=e?e.length:0);for(var r=-1,a=n-t||0,o=Array(a<0?0:a);++r<a;)o[r]=e[t+r];return o}}}]);
//# sourceMappingURL=311.talkdeskchatsdk.js.map